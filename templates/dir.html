{#
Copyright (c) 2026 Dmitry Arkhipov (grisumbras@yandex.ru)

Distributed under the Boost Software License, Version 1.0. (See accompanying
file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#}

{% extends 'base.html' %}

{% block main %}
<table class="file-comparison coverage-summary tableblock grid-all frame-all fit-content">
  <thead>
    <tr class="row-coverage-advanced">
      <th>Child</th>
      <th>Rate</th>
      <th>Total</th>
      <th>Misses</th>
      {{ coverage_kind('UNC') }}
      {{ coverage_kind('LBC') }}
      {{ coverage_kind('UIC') }}
      {{ coverage_kind('UBC') }}
      {{ coverage_kind('GBC') }}
      {{ coverage_kind('GIC') }}
      {{ coverage_kind('GNC') }}
      {{ coverage_kind('CBC') }}
      {{ coverage_kind('EUB') }}
      {{ coverage_kind('ECB') }}
      {{ coverage_kind('DUB') }}
      {{ coverage_kind('DCB') }}
    </tr>
    <tr class="row-coverage-basic">
      <th>Child</th>
      <th>Rate</th>
      <th>Total</th>
      <th class="coverage-kind coverage-miss">Misses</th>
      <th class="coverage-kind coverage-miss-new" colspan="4">New Misses</th>
      <th class="coverage-kind coverage-hit" colspan="4">Hits</th>
      <th class="coverage-kind coverage-hit-new" colspan="4">New Hits</th>
    </tr>
  </thead>
  <tbody>
    <tr class="row-coverage-advanced">
      <th>Total</th>
      <td>{{ "%.2f" | format(file.lines.total_hits / file.lines.total_count * 100) }}%</td>
      <td>{{ file.lines.total_count }}</td>
      <td>{{ file.lines.total_count - file.lines.total_hits }}</td>
      {{ coverage_kind('UNC', data=file.lines.UNC or '') }}
      {{ coverage_kind('LBC', data=file.lines.LBC or '') }}
      {{ coverage_kind('UIC', data=file.lines.UIC or '') }}
      {{ coverage_kind('UBC', data=file.lines.UBC or '') }}
      {{ coverage_kind('GBC', data=file.lines.GBC or '') }}
      {{ coverage_kind('GIC', data=file.lines.GIC or '') }}
      {{ coverage_kind('GNC', data=file.lines.GNC or '') }}
      {{ coverage_kind('CBC', data=file.lines.CBC or '') }}
      {{ coverage_kind('EUB', data=file.lines.EUB or '') }}
      {{ coverage_kind('ECB', data=file.lines.ECB or '') }}
      {{ coverage_kind('DUB', data=file.lines.DUB or '') }}
      {{ coverage_kind('DCB', data=file.lines.DCB or '') }}
    </tr>
    <tr class="row-coverage-basic">
      <th>Total</th>
      <td>{{ "%.2f" | format(file.lines.total_hits / file.lines.total_count * 100) }}%</td>
      <td>{{ file.lines.total_count }}</td>
      {% set v = file.lines.total_count - file.lines.total_hits -%}
      <td class="coverage-kind{% if v %} coverage-miss{% endif %}">
          {{ v or '' }}
      </td>
      {% set v = file.lines.UNC + file.lines.LBC + file.lines.UIC -%}
      <td class="coverage-kind{% if v %} coverage-miss-new{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
      {% set v = file.lines.total_hits -%}
      <td class="coverage-kind{% if v %} coverage-hit{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
      {% set v = file.lines.GBC + file.lines.GIC + file.lines.GNC -%}
      <td class="coverage-kind{% if v %} coverage-hit-new{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
    </tr>
    {% for c in file.children %}
    <tr class="row-coverage-advanced">
      <th><a href='{{ file.relative_path(c) }}'>{{ c.basename }}</a></th>
      <td>{{ "%.2f" | format(c.lines.total_hits / c.lines.total_count * 100) }}%</td>
      <td>{{ c.lines.total_count }}</td>
      <td>{{ (c.lines.total_count - c.lines.total_hits) or '' }}</td>
      {{ coverage_kind('UNC', data=c.lines.UNC or '') }}
      {{ coverage_kind('LBC', data=c.lines.LBC or '') }}
      {{ coverage_kind('UIC', data=c.lines.UIC or '') }}
      {{ coverage_kind('UBC', data=c.lines.UBC or '') }}
      {{ coverage_kind('GBC', data=c.lines.GBC or '') }}
      {{ coverage_kind('GIC', data=c.lines.GIC or '') }}
      {{ coverage_kind('GNC', data=c.lines.GNC or '') }}
      {{ coverage_kind('CBC', data=c.lines.CBC or '') }}
      {{ coverage_kind('EUB', data=c.lines.EUB or '') }}
      {{ coverage_kind('ECB', data=c.lines.ECB or '') }}
      {{ coverage_kind('DUB', data=c.lines.DUB or '') }}
      {{ coverage_kind('DCB', data=c.lines.DCB or '') }}
    </tr>
    <tr class="row-coverage-basic">
      <th><a href='{{ file.relative_path(c) }}'>{{ c.basename }}</a></th>
      <td>{{ "%.2f" | format(c.lines.total_hits / c.lines.total_count * 100) }}%</td>
      <td>{{ c.lines.total_count }}</td>
      {% set v = c.lines.total_count - c.lines.total_hits -%}
      <td class="coverage-kind{% if v %} coverage-miss{% endif %}">
          {{ v or '' }}
      </td>
      {% set v = c.lines.UNC + c.lines.LBC + c.lines.UIC -%}
      <td class="coverage-kind{% if v %} coverage-miss-new{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
      {% set v = c.lines.total_hits -%}
      <td class="coverage-kind{% if v %} coverage-hit{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
      {% set v = c.lines.GBC + c.lines.GIC + c.lines.GNC -%}
      <td class="coverage-kind{% if v %} coverage-hit-new{% endif %}" colspan="4">
          {{ v or '' }}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
